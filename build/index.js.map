{"version":3,"sources":["../src/index.js"],"names":["createCore","options","Object","assign","room","path","reducers","players","require","rounds","meta","store","loadState","subscribe","saveState","getState","defaultCore","defaults","storage","omiCore"],"mappings":"AAAA;;;;;;;AAEA;;AACA;;;;AACA;;AACA;;;;;;AAEA,IAAMA,aAAa,eAAbA,UAAa,GAAwB;AAAA,QAAjBC,OAAiB,uEAAP,EAAO;;AAAA,yBACnBC,OAAOC,MAAP,CAAc,EAAd,sBAA4BF,OAA5B,CADmB;AAAA,QAChCG,IADgC,kBAChCA,IADgC;AAAA,QAC3BC,IAD2B,kBAC3BA,IAD2B;;AAEvC,sBAAQD,IAAR,GAAeA,IAAf;AACA,sBAAQC,IAAR,GAAeA,IAAf;AACA,QAAMC,WAAW;AACbC,iBAASC,QAAQ,mBAAR,CADI;AAEbC,gBAAQD,QAAQ,kBAAR,CAFK;AAGbE,cAAMF,QAAQ,iBAAR;AAHO,KAAjB;AAKA,QAAMG,QAAQ,wBAAY,4BAAgBL,QAAhB,CAAZ,GAAuC,MAAM,kBAAQM,SAAR,EAA7C,EAAd;AACAD,UAAME,SAAN,CAAgB,YAAI;AAChB,0BAAQC,SAAR,CAAkBH,MAAMI,QAAN,EAAlB;AACH,KAFD;AAGA,WAAOJ,KAAP;AACH,CAdD;;AAgBA,IAAMK,cAAc,SAAdA,WAAc,GAAM;AACtB,WAAOhB,aAAa,EAACI,MAAK,mBAAN,EAAb,CAAP;AACH,CAFD;;QAISa,Q;QAAUC,O;QAAwBC,O,GAAfH,W;QAAwBhB,U,GAAAA,U;kBACrCgB,W","file":"index.js","sourcesContent":["\"use strict\";\n\nimport { createStore,combineReducers,applyMiddleware } from 'redux';\nimport storage from './services/storage';\nimport {v4} from 'node-uuid';\nimport defaults from './defaults';\n\nconst createCore = async (options = {}) => {\n    const {room,path} = Object.assign({}, defaults, options);\n    storage.room = room;\n    storage.path = path;\n    const reducers = {\n        players: require('./reducers/player'),\n        rounds: require('./reducers/round'),\n        meta: require('./reducers/meta')\n    }\n    const store = createStore(combineReducers(reducers), await storage.loadState());\n    store.subscribe(()=>{\n        storage.saveState(store.getState());\n    })\n    return store; \n}\n\nconst defaultCore = () => {\n    return createCore()({room:v4()});\n};\n\nexport { defaults, storage, defaultCore as omiCore, createCore };\nexport default defaultCore;\n"]}