{"version":3,"sources":["src/index.js"],"names":[],"mappings":"AAAA;;;;;;;AAEA;;AACA;;;;AACA;;AACA;;;;;;AAEA,IAAM,aAAa,eAAb,UAAa,GAAwB;AAAA,QAAjB,OAAiB,uEAAP,EAAO;;AAAA,yBACnB,OAAO,MAAP,CAAc,EAAd,sBAA4B,OAA5B,CADmB;AAAA,QAChC,IADgC,kBAChC,IADgC;AAAA,QAC3B,IAD2B,kBAC3B,IAD2B;;AAEvC,sBAAQ,IAAR,GAAe,IAAf;AACA,sBAAQ,IAAR,GAAe,IAAf;AACA,QAAM,WAAW;AACb,iBAAS,QAAQ,mBAAR,CADI;AAEb,gBAAQ,QAAQ,kBAAR,CAFK;AAGb,cAAM,QAAQ,iBAAR;AAHO,KAAjB;AAKA,QAAM,QAAQ,wBAAY,4BAAgB,QAAhB,CAAZ,GAAuC,MAAM,kBAAQ,SAAR,EAA7C,EAAd;AACA,UAAM,SAAN,CAAgB,YAAI;AAChB,0BAAQ,SAAR,CAAkB,MAAM,QAAN,EAAlB;AACH,KAFD;AAGA,WAAO,KAAP;AACH,CAdD;;AAgBA,IAAM,cAAc,SAAd,WAAc,GAAM;AACtB,WAAO,aAAa,EAAC,MAAK,mBAAN,EAAb,CAAP;AACH,CAFD;;QAIS,Q;QAAU,O;QAAwB,O,GAAf,W;QAAwB,U,GAAA,U;kBACrC,W","file":"index.js","sourcesContent":["\"use strict\";\n\nimport { createStore,combineReducers,applyMiddleware } from 'redux';\nimport storage from './services/storage';\nimport {v4} from 'node-uuid';\nimport defaults from './defaults';\n\nconst createCore = async (options = {}) => {\n    const {room,path} = Object.assign({}, defaults, options);\n    storage.room = room;\n    storage.path = path;\n    const reducers = {\n        players: require('./reducers/player'),\n        rounds: require('./reducers/round'),\n        meta: require('./reducers/meta')\n    }\n    const store = createStore(combineReducers(reducers), await storage.loadState());\n    store.subscribe(()=>{\n        storage.saveState(store.getState());\n    })\n    return store; \n}\n\nconst defaultCore = () => {\n    return createCore()({room:v4()});\n};\n\nexport { defaults, storage, defaultCore as omiCore, createCore };\nexport default defaultCore;\n"]}